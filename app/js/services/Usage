var ImageShack = require('./image-shack');

function upload(imagePath, next) {
  var imageShack = new ImageShack(apiKey, true);
  imageShack.login(username, password, 
    function(err, result) {
      if(err) { return next(err); }
      imageShack.upload(imagePath, function(err, result) {
        if(err) { return next(err); }
        if(!result.success) { return next('failed'); }
        return next(null, result.result.images[0].direct_link);
      });
  });
};